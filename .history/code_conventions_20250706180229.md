# Соглашения по коду и документации (Code Conventions)

## Общие принципы
- Читаемость и простота кода важнее краткости
- Следовать принципу "одна задача — один модуль/файл"
- Все изменения должны быть согласованы через pull request
- Любой код сопровождается комментариями, если логика неочевидна

## Стиль кода (Python)
- Использовать PEP8 как основной стандарт
- Именование переменных и функций — snake_case
- Классы — CamelCase
- Максимальная длина строки — 100 символов
- Отступы — 2 пробела
- Не использовать неявные глобальные переменные
- Все зависимости фиксировать в requirements.txt и environment.yml

## Использование переменных окружения и .env
- Все секретные данные (токены, ключи, пароли) хранить только в файле .env
- Файл .env не коммитить в репозиторий (добавить в .gitignore)
- Для загрузки переменных использовать python-dotenv или аналогичный инструмент
- В README.md приводить пример .env с описанием переменных
- Не хранить секреты в исходном коде или других файлах

## Использование conda
- Для всех разработчиков обязательно использовать conda-окружение
- Окружение создаётся командой: `conda env create -f environment.yml`
- Все зависимости проекта фиксируются в environment.yml
- При добавлении новых пакетов обновлять environment.yml командой: `conda env export > environment.yml`
- Не вносить лишние пакеты в окружение (только необходимые для работы и тестирования)
- Описание и инструкции по работе с окружением — в README.md

## Оформление промптов и текстовых файлов
- Промпты и шаблоны хранятся в отдельных файлах (YAML/JSON/MD)
- Каждый промпт снабжён комментарием с назначением и примером использования
- Для многоязычности — отдельные файлы на каждый язык
- Каталог услуг реализуется через абстракцию, поддерживающую разные источники данных (файл, БД, облако)
- Логирование реализуется через абстракцию, поддерживающую разные источники хранения (файл, БД, облако)

## Документация
- Документировать каждую публичную функцию и класс (docstring)
- README.md — краткое описание проекта, инструкция по запуску
- Все архитектурные решения фиксируются в design_vision.md
- Все продуктовые требования — в product_idea.md

## Структура репозитория
- docs/ — документация и продуктовые материалы
- src/ — исходный код
- tests/ — тесты
- data/ — примеры данных, промпты, шаблоны

## Именование
- Файлы и директории — только латиница, без пробелов, snake_case
- Коммиты — в формате: <тип>: <краткое описание> (пример: feat: add user greeting)
- Ветки — feature/..., bugfix/..., hotfix/..., doc/...

## Pull Request и ревью
- Каждый PR должен содержать описание изменений и ссылку на задачу
- Не сливать PR без ревью (минимум 1 одобрение)
- В PR не должно быть неиспользуемого кода и временных файлов

## Тестирование
- Для каждой новой функции — тест в tests/
- Покрытие тестами — не менее 99% для ключевых модулей
- Все тесты должны проходить перед слиянием в main

## Прочее
- Соблюдать структуру задач и итераций из tasklist.md
- Все изменения фиксировать в соответствующих документах 